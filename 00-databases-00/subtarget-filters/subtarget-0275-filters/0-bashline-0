for file in {mess.flt.txt,arcade.flt.txt,non-arcade.ini,arcade.ini,mess.flt,arcade.flt};do rm $file;done;/opt/retropie/emulators/mame/mame -listdevices|awk '/^Driver/{print $2}'|while read driver;do if [[ -z $(/opt/retropie/emulators/mame/mame -listxml $driver|awk '/coins=/') ]];then echo "$driver (non-arcade)";echo $driver >> non-arcade.ini;echo $(/opt/retropie/emulators/mame/mame -listsource $driver|sed s'/.* //g') >> mess.flt.txt;else echo "$driver (arcade)";echo $driver >> arcade.ini;echo $(/opt/retropie/emulators/mame/mame -listsource $driver|sed s'/.* //g') >> arcade.flt.txt;fi;done;cat mess.flt.txt |sort|uniq > mess.flt;cat arcade.flt.txt |sort|uniq > arcade.flt
rm *.txt
